name: Release Helpers

on:
  push:
    branches:
      - main
    paths:
      - "helpers/**"

permissions:
  contents: read

jobs:
  bump-version-and-release-notes:
    runs-on: ubuntu-latest
    outputs:
      new-version: ${{ steps.bump-version.outputs.new-version }}
    steps:
      - name: Bump Version and Generate Release Notes
        uses: ./.github/actions/release-notes
        id: bump-version
        with:
          module: "helpers"

  release:
    runs-on: ubuntu-latest
    needs: bump-version-and-release-notes
    # contents: write via the GH app
    environment: release
    steps:
      - name: Release
        uses: ./.github/actions/release
        with:
          module: "helpers"
          new-version: ${{ needs.bump-version-and-release-notes.outputs.new-version }}
